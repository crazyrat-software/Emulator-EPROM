TEMP	EQU	1FH

	LJMP START
	
	ORG 001BH	;TIMER 1
	MOV TEMP,1AH	;PSW
	MOV 1AH,PSW
	MOV PSW,TEMP
	CLR RS0
	JNB F0,$+3+2
	SETB RS0
	MOV TEMP,1BH	;A
	MOV 1BH,A	
	MOV A,TEMP
	MOV TEMP,1CH	;B
	MOV 1CH,B	
	MOV B,TEMP
	MOV TEMP,1DH	;DPH
	MOV 1DH,DPH	
	MOV DPH,TEMP
	MOV TEMP,1EH	;DPL
	MOV 1EH,DPL
	MOV DPL,TEMP
	MOV TEMP,18H	;ADRES H
	POP 18H
	MOV A,19H	;ADRES L
	POP 19H
	PUSH ACC
	PUSH TEMP
	RETI

START:
	MOV SP,#2FH
	ORL TMOD,#00010000B
	SETB EA
	SETB ET1
	SETB PT1
	SETB TR1	
	
	SETB F0
	MOV 1AH,PSW	;ZNACZNIKI
	MOV 18H,#02	;ADRES ZADANIA 2
	MOV 19H,#00
	CLR F0

	ORG 0100H
TASK1:
	INC R2
	MOV A,R2
	CPL A
	MOV P1,A
REP:
	DJNZ R0,REP
	MOV R0,#0FFH
	DJNZ R1,REP
	MOV R1,#050H

	SJMP TASK1

	ORG 0200H
TASK2:
	CPL P3.2
	DJNZ R2,TASK2
	MOV R2,2
	SJMP TASK2