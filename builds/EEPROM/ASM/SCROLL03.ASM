	LJMP START

	ORG 000Bh
	PUSH PSW
	PUSH ACC
	MOV TH0,#0FFH
	MOV TL0,#020H
	DJNZ R2,SILENT
	MOV R2,B
	CPL P3.2
SILENT:
	POP ACC
	POP PSW
	RETI

START:
	MOV TMOD,#00010001B
	SETB EA
	SETB ET0
	MOV SP,#1FH
	MOV R7,#0FFH		;DELAY
	MOV R6,#080H		;DELAY
	MOV R0,#3		;WARTOSC PRZESUWANA
	MOV R1,#6		;ILOSC CYKLI
	MOV B,#10H		;ton
	SETB TR0

LEFT:
	LCALL SHOW
	LCALL DELAY
	MOV A,R0
	RL A
	INC B
	MOV R0,A
	DJNZ R1,LEFT
	MOV R1,#6
RIGHT:
	LCALL SHOW
	LCALL DELAY
	MOV A,R0
	RR A
	DEC B
	MOV R0,A
	DJNZ R1,RIGHT
	MOV R1,#6
	SJMP LEFT


SHOW:
	MOV A,R0
	CPL A
	MOV P1,A
	RET

DELAY:
	NOP
	DJNZ R7,DELAY
	MOV R7,#0FFH
	DJNZ R6,DELAY
	MOV R6,#080H
	RET
